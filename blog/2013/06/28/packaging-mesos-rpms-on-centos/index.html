
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Packaging Mesos - RPMS on CentOS - Knowledge Mining</title>
  <meta name="author" content="Murali Raju">

  
  <meta name="description" content="There is a lot of noise around YARN and Hadoop 2.0. The concise version is, YARN splits the Hadoop JopTracker function and extracts the resource &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://murraju.github.io/blog/2013/06/28/packaging-mesos-rpms-on-centos">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Knowledge Mining" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Knowledge Mining</a></h1>
  
    <h2>Artifacts Of An Inquisitive Mind</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:murraju.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Packaging Mesos - RPMS on CentOS</h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-06-28T18:54:00-04:00" pubdate data-updated="true">Jun 28<span>th</span>, 2013</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>There is a lot of noise around <a href="http://hortonworks.com/blog/week-in-review-hadoop-summit-modern-data-architecture-and-yarn/?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3A+hortonworks%2Ffeed+(Hortonworks+on+Hadoop)">YARN</a> and Hadoop 2.0. The concise version is, YARN splits the Hadoop JopTracker function and extracts the resource management piece into a seperate framework. This opens up powerful options to run other processing frameworks, such as graphing for example, in addition to MapReduce on Hadoop.</p>

<p>Although this is certainly a great step forward in Hadoop&rsquo;s evolution, there is another resource manager that has been around for some time and is also part of the Apache Projects called <a href="http://incubator.apache.org/mesos/">Mesos</a>. Mesos is brought to you by the awesome team at UC Berkeley that created <a href="https://amplab.cs.berkeley.edu/software/">BDAS</a> &ndash; Berkeley Data Analysis Stack. As of this post, I believe Twitter is using Mesos.</p>

<p>As I go deep into working on BDAS, I found it cumbersome to move .tar.gz across nodes (bins) and perhaps rpms and debs are of course more elegant &ndash; especially when it comes to automation with Chef for example.</p>

<p>The following documents the steps I took to create an RPM for Mesos on CentOS. I am pretty sure there are better ways to do this, but I wanted to document this for myself before moving towards Jenkins/Nesus route down the road.</p>

<p>On a CentOS 6.4 node using mesos version 0.12.0:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>
</span><span class='line'>[root@node1 mesos-0.12.0]#ls
</span><span class='line'>aclocal.m4      bin           config.log     config.sub    depcomp     hadoop      libtool    m4           Makefile.in  NOTICE              src          third_party
</span><span class='line'>ar-lib          bootstrap     config.lt      configure     DISCLAIMER  include     LICENSE    Makefile     missing      protobuf-2.4.1.jar  support
</span><span class='line'>autom4te.cache  config.guess  config.status  configure.ac  ec2         install-sh  ltmain.sh  Makefile.am  mpi          README              test-driver
</span></code></pre></td></tr></table></div></figure>


<p>Create an install directory for the bins that need to be packaged.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@node1 mesos-0.12.0]#mkdir /&lt;working dir&gt;/mesosinstalldir
</span></code></pre></td></tr></table></div></figure>


<p>Run ./configure. I had to disable curl and perftools for compilation to work on CentOS.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@node1 mesos-0.12.0]#./configure --prefix=/usr/local/mesos --without-curl --disable-perftools
</span></code></pre></td></tr></table></div></figure>


<p>Run make and make install to /<working dir>/mesosinstalldir</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@node1 mesos-0.12.0]#make
</span><span class='line'>[root@node1 mesos-0.12.0]#make install DESTDIR=/&lt;working dir&gt;/mesosinstalldir
</span></code></pre></td></tr></table></div></figure>


<p></p>

<p>rpmbuild tools part of CentOS allow the capability to build rpms from source. However, I prefer Jordan Sissel&rsquo;s <a href="https://github.com/jordansissel/fpm">FPM</a>. You will need Ruby and install fpm with &ldquo;gem install fpm&rdquo;. To create an rpm for mesos &ndash; mesos-0.12.0-1.x86_64.rpm, run the following:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@node1 mesos-0.12.0]#fpm --verbose --workdir /&lt;working dir&gt;/pkg/ -s dir -t rpm -n mesos -v 0.12.0 -C /&lt;working dir&gt;/mesosinstalldir/ usr/
</span></code></pre></td></tr></table></div></figure>


<p>Now it is much easier to distribute and install mesos on multiples nodes! Check the fpm docs on how to builds other package formats such as .debs in addition to rpms.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Murali Raju</span></span>

      








  


<time datetime="2013-06-28T18:54:00-04:00" pubdate data-updated="true">Jun 28<span>th</span>, 2013</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/bdas/'>bdas</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://murraju.github.io/blog/2013/06/28/packaging-mesos-rpms-on-centos/" data-via="murraju" data-counturl="http://murraju.github.io/blog/2013/06/28/packaging-mesos-rpms-on-centos/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2013/05/19/hadoop-hdp-1-dot-2-lab-with-virtualbox/" title="Previous Post: A 5 node Hadoop HDP 1.2 Cluster with VirtualBox, Vagrant and Chef">&laquo; A 5 node Hadoop HDP 1.2 Cluster with VirtualBox, Vagrant and Chef</a>
      
      
        <a class="basic-alignment right" href="/blog/2013/07/28/actor-model-explained/" title="Next Post: Actor Model explained">Actor Model explained &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>About Me</h1>
  <p>I am an Explorer, not an Expert. This blog is to share my thoughts and work in Technology and the Business related to Technology. I spend most of my time helping Clients both on Strategy and Tactical needs around Emerging Technologies built with Open Source. Functional Programming keeps me awake.</p>
    <p>Contact: murali.raju@appliv.com</p>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/07/28/actor-model-explained/">Actor Model Explained</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/28/packaging-mesos-rpms-on-centos/">Packaging Mesos - RPMS on CentOS</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/05/19/hadoop-hdp-1-dot-2-lab-with-virtualbox/">A 5 Node Hadoop HDP 1.2 Cluster With VirtualBox, Vagrant and Chef</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/05/19/the-beauty-of-xml-processing-in-scala/">The Beauty of XML Processing in Scala</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/05/19/jruby/">JRuby, Kerberos and Hadoop HDFS</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/murraju">@murraju</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'murraju',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





<section>
  <h1>On Twitter:</h1>
  <div>
    <p><br /><a href="http://twitter.com/murraju" target="_blank">My Tweets, on Twitter.</a></p>
    <a href="http://twitter.com/murraju" class="twitter-follow-button" data-show-count="">Follow @murraju</a>
  </div>
</section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Murali Raju -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a> and <a href="http://github.com">Github Pages</a> </span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
